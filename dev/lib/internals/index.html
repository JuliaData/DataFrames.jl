<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Internals · DataFrames.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://juliadata.github.io/DataFrames.jl/stable/lib/internals/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="DataFrames.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">DataFrames.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><a class="tocitem" href="../../man/basics/">First Steps with DataFrames.jl</a></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../../man/getting_started/">Getting Started</a></li><li><a class="tocitem" href="../../man/working_with_dataframes/">Working with DataFrames</a></li><li><a class="tocitem" href="../../man/importing_and_exporting/">Importing and Exporting Data (I/O)</a></li><li><a class="tocitem" href="../../man/joins/">Joins</a></li><li><a class="tocitem" href="../../man/split_apply_combine/">Split-apply-combine</a></li><li><a class="tocitem" href="../../man/reshaping_and_pivoting/">Reshaping</a></li><li><a class="tocitem" href="../../man/sorting/">Sorting</a></li><li><a class="tocitem" href="../../man/categorical/">Categorical Data</a></li><li><a class="tocitem" href="../../man/missing/">Missing Data</a></li><li><a class="tocitem" href="../../man/querying_frameworks/">Data manipulation frameworks</a></li><li><a class="tocitem" href="../../man/comparisons/">Comparison with Python/R/Stata</a></li></ul></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../types/">Types</a></li><li><a class="tocitem" href="../functions/">Functions</a></li><li><a class="tocitem" href="../indexing/">Indexing</a></li><li class="is-active"><a class="tocitem" href>Internals</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">API</a></li><li class="is-active"><a href>Internals</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Internals</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaData/DataFrames.jl/blob/main/docs/src/lib/internals.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Internals"><a class="docs-heading-anchor" href="#Internals">Internals</a><a id="Internals-1"></a><a class="docs-heading-anchor-permalink" href="#Internals" title="Permalink"></a></h1><div class="admonition is-warning"><header class="admonition-header">Internal API</header><div class="admonition-body"><p>The functions, methods and types listed on this page are internal to DataFrames and are <strong>not considered to be part of the public API</strong>.</p></div></div><article class="docstring"><header><a class="docstring-binding" id="DataFrames.compacttype" href="#DataFrames.compacttype"><code>DataFrames.compacttype</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">compacttype(T::Type, maxwidth::Int=8, initial::Bool=true)</code></pre><p>Return compact string representation of type <code>T</code>.</p><p>For displaying data frame we do not want string representation of type to be longer than <code>maxwidth</code>. This function implements rules how type names are cropped if they are longer than <code>maxwidth</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaData/DataFrames.jl/blob/b07a8bf83df04f663ca48cf19ff5c159601178a8/src/abstractdataframe/show.jl#L94-L102">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DataFrames.gennames" href="#DataFrames.gennames"><code>DataFrames.gennames</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">gennames(n::Integer)</code></pre><p>Generate standardized names for columns of a DataFrame. The first name will be <code>:x1</code>, the second <code>:x2</code>, etc.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaData/DataFrames.jl/blob/b07a8bf83df04f663ca48cf19ff5c159601178a8/src/other/utils.jl#L108-L113">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DataFrames.getmaxwidths" href="#DataFrames.getmaxwidths"><code>DataFrames.getmaxwidths</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">DataFrames.getmaxwidths(df::AbstractDataFrame,
                        io::IO,
                        rowindices1::AbstractVector{Int},
                        rowindices2::AbstractVector{Int},
                        rowlabel::Symbol,
                        rowid::Union{Integer, Nothing},
                        show_eltype::Bool,
                        buffer::IOBuffer)</code></pre><p>Calculate, for each column of an AbstractDataFrame, the maximum string width used to render the name of that column, its type, and the longest entry in that column – among the rows of the data frame will be rendered to IO. The widths for all columns are returned as a vector.</p><p>Return a <code>Vector{Int}</code> giving the maximum string widths required to render each column, including that column&#39;s name and type.</p><p>NOTE: The last entry of the result vector is the string width of the implicit row ID column contained in every <code>AbstractDataFrame</code>.</p><p><strong>Arguments</strong></p><ul><li><code>df::AbstractDataFrame</code>: The data frame whose columns will be printed.</li><li><code>io::IO</code>: The <code>IO</code> to which <code>df</code> is to be printed</li><li>`rowindices1::AbstractVector{Int}: A set of indices of the first chunk of the AbstractDataFrame that would be rendered to IO.</li><li>`rowindices2::AbstractVector{Int}: A set of indices of the second chunk of the AbstractDataFrame that would be rendered to IO. Can be empty if the AbstractDataFrame would be printed without any ellipses.</li><li><code>rowlabel::AbstractString</code>: The label that will be used when rendered the numeric ID&#39;s of each row. Typically, this will be set to &quot;Row&quot;.</li><li><code>rowid</code>: Used to handle showing <code>DataFrameRow</code>.</li><li><code>show_eltype</code>: Whether to print the column type  under the column name in the heading.</li><li><code>buffer</code>: buffer passed around to avoid reallocations in <code>ourstrwidth</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaData/DataFrames.jl/blob/b07a8bf83df04f663ca48cf19ff5c159601178a8/src/abstractdataframe/io.jl#L1-L38">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DataFrames.ourshow" href="#DataFrames.ourshow"><code>DataFrames.ourshow</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">DataFrames.ourshow(io::IO, x::Any, truncstring::Int)</code></pre><p>Render a value to an <code>IO</code> object compactly using print. <code>truncstring</code> indicates the approximate number of text characters width to truncate the output (if it is a non-positive value then no truncation is applied).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaData/DataFrames.jl/blob/b07a8bf83df04f663ca48cf19ff5c159601178a8/src/abstractdataframe/show.jl#L28-L34">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DataFrames.ourstrwidth" href="#DataFrames.ourstrwidth"><code>DataFrames.ourstrwidth</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">DataFrames.ourstrwidth(io::IO, x::Any, buffer::IOBuffer, truncstring::Int)</code></pre><p>Determine the number of characters that would be used to print a value.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaData/DataFrames.jl/blob/b07a8bf83df04f663ca48cf19ff5c159601178a8/src/abstractdataframe/show.jl#L5-L9">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DataFrames.@spawn_for_chunks" href="#DataFrames.@spawn_for_chunks"><code>DataFrames.@spawn_for_chunks</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@spawn_for_chunks basesize for i in range ... end</code></pre><p>Parallelize a <code>for</code> loop by spawning separate tasks iterating each over a chunk of at least <code>basesize</code> elements in <code>range</code>.</p><p>A number of task higher than <code>Threads.nthreads()</code> may be spawned, since that can allow for a more efficient load balancing in case some threads are busy (nested parallelism).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaData/DataFrames.jl/blob/b07a8bf83df04f663ca48cf19ff5c159601178a8/src/other/utils.jl#L197-L207">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DataFrames.default_table_transformation" href="#DataFrames.default_table_transformation"><code>DataFrames.default_table_transformation</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">default_table_transformation(df_sel::AbstractDataFrame, fun)</code></pre><p>This is a default implementation called when <code>AsTable(...) =&gt; fun</code> is requested. The <code>df_sel</code> argument is a data frame storing columns selected by <code>AsTable(...)</code> selector.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaData/DataFrames.jl/blob/b07a8bf83df04f663ca48cf19ff5c159601178a8/src/abstractdataframe/selectionfast.jl#L91-L97">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DataFrames.table_transformation" href="#DataFrames.table_transformation"><code>DataFrames.table_transformation</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">table_transformation(df_sel::AbstractDataFrame, fun)</code></pre><p>This is the function called when <code>AsTable(...) =&gt; fun</code> is requested. The <code>df_sel</code> argument is a data frame storing columns selected by the <code>AsTable(...)</code> selector.</p><p>By default it calls <code>default_table_transformation</code>. However, it is allowed to add special methods for specific types of <code>fun</code>, as long as the result matches what would be produced by <code>default_table_transformation</code>, except that it is allowed to perform <code>eltype</code> conversion of the resulting vectors or value type promotions that are consistent with <code>promote_type</code>.</p><p>It is guaranteed that <code>df_sel</code> has at least one column.</p><p>The main use of special <code>table_transformation</code> methods is to provide more efficient than the default implementations of requested <code>fun</code> transformation.</p><p>This function might become a part of the public API of DataFrames.jl in the future, currently it should be considered experimental.</p><p>Fast paths are implemented within DataFrames.jl for the following functions <code>fun</code>:</p><ul><li><code>sum</code>, <code>ByRow(sum),</code>ByRow(sum∘skipmissing)`</li><li><code>length</code>, <code>ByRow(length)</code>, <code>ByRow(length∘skipmissing)</code></li><li><code>mean</code>, <code>ByRow(mean),</code>ByRow(mean∘skipmissing)`</li><li><code>ByRow(var),</code>ByRow(var∘skipmissing)`</li><li><code>ByRow(std),</code>ByRow(std∘skipmissing)`</li><li><code>ByRow(median),</code>ByRow(median∘skipmissing)`</li><li><code>minimum</code>, <code>ByRow(minimum)</code>, <code>ByRow(minimum∘skipmissing)</code></li><li><code>maximum</code>, <code>ByRow(maximum)</code>, <code>ByRow(maximum∘skipmissing)</code></li><li><code>fun∘collect</code> and <code>ByRow(fun∘collect)</code> where <code>fun</code> is any function</li></ul><p>Note that in order to improve the performance <code>ByRow(sum)</code>, <code>ByRow(sum∘skipmissing)</code>, <code>ByRow(mean)</code>, and <code>ByRow(mean∘skipmissing)</code> perform all operations in the target element type. In some very rare cases (like mixing very large <code>Int64</code> values and <code>Float64</code> values) it can lead to a result different from the one that would be obtained by calling the function outside of DataFrames.jl. The way to avoid this precision loss is to use an anonymous function, e.g. instead of <code>ByRow(sum)</code> use <code>ByRow(x -&gt; sum(x))</code>. However, in general for such scenarios even standard aggregation functions should not be considered to provide reliable output, and users are recommended to switch to higher precision calculations. An example of a case when standard <code>sum</code> is affected by the situation discussed is:</p><pre><code class="nohighlight hljs">julia&gt; sum(Any[typemax(Int), typemax(Int), 1.0])
-1.0

julia&gt; sum(Any[1.0, typemax(Int), typemax(Int)])
1.8446744073709552e19</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaData/DataFrames.jl/blob/b07a8bf83df04f663ca48cf19ff5c159601178a8/src/abstractdataframe/selectionfast.jl#L1-L53">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DataFrames.isreadonly" href="#DataFrames.isreadonly"><code>DataFrames.isreadonly</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">isreadonly(fun)</code></pre><p>Trait returning a <code>Bool</code> indicator if function <code>fun</code> is only reading the passed argument. Such a function guarantees not to modify nor return in any form the passed argument. By default <code>false</code> is returned.</p><p>This function might become a part of the public API of DataFrames.jl in the future, currently it should be considered experimental. Adding a method to <code>isreadonly</code> for a specific function <code>fun</code> will improve performance of <code>AsTable(...) =&gt; ByRow(fun∘collect)</code> operation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaData/DataFrames.jl/blob/b07a8bf83df04f663ca48cf19ff5c159601178a8/src/abstractdataframe/selectionfast.jl#L57-L68">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../indexing/">« Indexing</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.10 on <span class="colophon-date" title="Wednesday 1 December 2021 08:54">Wednesday 1 December 2021</span>. Using Julia version 1.6.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
